## Модуль

- Хранение (а). Описание себя в исходной заметке-точке входа.
- Отображение (б). Как просматривать заметки, как выполнять действия.
- Возможные акты пользователя (в). Например создание и удаление. Ещё доступ и просмотр, но это ближе к отображению.

А как переключать между единой заметкой и мультимодульностью?

Раз единая заметка это модуль, и несколько заметок - это такой модуль, то зависит от того, какой сейчас модуль включен. Если модуль единой заметки, то он просто покажет содержание заметки. Если же модуль нескольких заметок с текущей, то он уже покажет некоторый UI с заметками, плюс даст возможность создавать и удалять заметки.

Как переключать модули? В принципе этим и рулит исходная заметка-точка входа. Но есть особенности. Во-первых все модули доступны сразу, так как это разработка. Максимум что может быть - это какой модуль активен в данный момент. А это опять использование модуля "текущая заметка".

Ссылка на модуль?

Вообще не совсем. Модуль - он часть сервиса, это управленец. А вот описание комплекса заметок в рамках какого-то модуля есть заметка. Модуль это класс, а конкретные описания каких-то комплексов заметок есть экземпляры этого класса в хранилище. И вот на них ссылки - могут быть.

Но это кажется забегание вперед. Сейчас важно что исходная заметка становится описанием первого комплекса заметок. И работа над ним породит и язык описания комплексов заметок других модулей.

Таким образом и первая единая заметка суть модуль.

Принцип модулей - они могу использоваться внутри других модулей. Так может быть? Или это следующий уровень? Возможно.

Пока надо бы суметь сделать "единую заметку" и "несколько заметок" как раздельные модули.

Единое для них - загрузка первоначально точки входа - заметки `note`.

А получается, первоначально грузить-то должно приложение? App? Это выглядит и логично и нелогично.

Я могу сразу перенаправить пользователя на страницу единой заметки. Но теоретически я должен бы сначала узнать содержание исходной заметки-точки входа. Но... дело в том что исходный сервис это же единая заметка и есть. Или нет? Если я нагружу единую заметку логикой приложения, это будет перебор... А если исходно мне и не нужна же была отдельная ссылка для единой заметки. Её я сделал забегая вперед. Можно было бы пихнуть всё в исходный app. Тогда сейчас бы я отделил единую заметку в модуль, а в App оставил (и стал расширять бы) логико именно обще-приложения.

Кажется вообще логичным подгрузить `note` сразу в приложении. А еще подозрительно хочется различные хранилища описывать тоже в заметке. Но тогда где их хранить? Они же не принадлежат никакому хранилищу. Видимо это и есть конфиг в `minota.js`.

Если его нет, мы создаём новый и сохраняем в какую-то домашнюю директорию и в следующий раз уже берем данные оттуда.

Откуда грузить первоначальную заметку-точку входа? Это же конкретное хранилище?

# Первоначальная загрузка приложения

Требует списка хранилищ. Описание хранилищ также может быть заметкой, кстати...

Заметка-описание хранилищ
Заметка-точка входа в хранилище

Теоретически первым хранилищем по-умолчанию может быть localStorage. Но затем можно настроить что список хранилищ будет храниться в одном из хранилищ же. Что забавно.

# Модуль - конфигурация приложения (экземпляр пользователя)

- Список хранилищ
- Текущее хранилище активное (по-умолчанию)

# Модуль хранилище (и конфигурация приложения)

Можно ли пока отложить создание этого модуля? Или нужно побороть нетерпение и продумать и его, раз оно у нас было уже?

При старте приложения нам нужно произвести начальную подготовку. Есть конфигурация приложения, немного различающаяся у каждого пользователя.

Например всё, что есть в файле minota.json в домашней папке пользователя - должно бы стать достоянием приложения.

Получается есть разница между сервером который для меня есть лишь доступ к диску и сервером-хранилищем.

Есть вообще:
- внутренний сервер, для доступа к диску
- localstorage, броузерное хранилище

А что у нас с веб-версией и cli-версией? В случае с cli хранилище так или иначе уже определено. В случае в веб тоже (видимо какой-то платный сервер). Или нет? В случае с cli мы можем задать конфигурацию в файле так чтобы иметь несколько серверов. В случае с веб тоже - ведь как ещё я собирался добавлять сервисы третьей стороны (Evernote, Google Drive, etc).

В принципе мы можем хотеть иметь раздельные уже броузерные хранилища.

Мы можем хранить все данные в minota.json домашней директории. Правда броузерное хранилище не будет доступно извне приложения...

электрон:
- ui
- внутренний сервер локалхост для доступа к файлам
- localStorage

cli:
- доступ к файлам и конфигурациям на диске
- доступ к файловым хранилищам или по ссылке на веб-хранилища

веб:
- ui
- хранилище к которому прикреплено (свой сервер например)
- localStorage броузера

У нас есть вариации конфигураций. В каждом случае будет разный адрес хранилища. А еще смартфон же.

мобильное приложение:
- ui
- хранилище - то ли дропбокс, то ли прикреплено к веб
- подобие localStorage?

Получается у нас в любом случае есть подобие конфигурации. Она может быть представлена в виде json или даже описания текстового. Какие-то параметры принадлежат конкретной машине, какие-то можно хранить в самом хранилище.

По-сути саму оболочку-приложение можно считать первоначальным модулем-слугой-управленцем, который делает возможным работу с заметками. Грузит их, подбирает хранилища, и т.д. Значит этот модуль можно описать?

Обычно это константы приложения.
- ссылка на внутренний сервер приложения
- ключ от localStorage приложения (загрузочное хранилище)

Плюс это оповещения что нужно хранилище добавить

Ещё это интерфейс добавления хранилищ - кнопки добавить, убрать. В cli это мы делаем составляя на клавиатуре текстом json файл.

https://github.com/http-party/node-portfinder/blob/master/lib/portfinder.js - поиск свободного порта.

В электрон же приложении у нас появляются новые данные - порт внутреннего сервера, например.

Получается мы и тут делим - конфигурация приложения могущая быть записанной в хранилище и конфигурация ещё более отвлеченная - номер порта вннутреннего сервера например. Или ключ системного localStorage (а нужен ли он?). Дался мне этот ключ хранилища и порта...
