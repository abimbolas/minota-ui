# Модуль заметок

У нас сначала был компонент заметки. Он был единым.

Теперь, когда мы добавляем новую заметку, куда-то девая бывшую до этого единственной, заметку, происходит раздвоение:

1. С одной стороны, заметка перестает быть единой, рядом появляется еще одна и еще одна - много заметок. Заметка подразумевает возможность соседних заметок.

2. С другой стороны, единая заметка продолжает существовать в форме единого _множества_ заметок.

Поэтому теперь заметка может быть в двух видах - в виде одной заметки с последовательными делениями, либо в виде нескольких раздельных заметках. Чтобы сводить несколько заметок в одну, надо принять разделители. С другой стороны, можно и нужно будет разделять заметку на несколько. Но тогда как хранить её? Очевидно заметка может хранить ссылки на несколько (но не все) заметки. Значит она сама должна где-то храниться. Где? Вопросы, возможно преждевременные.

Но если раньше мы хранили единую заметку как один файл, то раз теперь мы преобразовались во множество заметок, то хранение также должно претерпеть изменения.

1. С одной стороны мы должны мочь хранить несколько заметок.
2. С другой стороны, мы должны мочь хранить множество как новое "единое", целиком. Как? Если у множества появятся параметры, необходимо будет хранить множество как заметку.

Далее, у нас сейчас есть "текущая" заметка, подобно курсору и промотке отдельной заметки. Для заметки мы не храним (пока) курсор скролл. А для множества? От ответа зависит тип хранения множества.

Вот сложность: заметка - это модель материи, а курсор и "текущесть" заметки множества - модель действий пользователя. Но ведь действие пользователя, пользователь и материя сливаются в одно, это есть единое нечто (в определенных рамках). Нужно ли нам это хранить отдельно? Можно ли хранить это вместе? Нужно ли вообще это хранить? Кажется да. Реальный мир сохраняет все последствия движений. Сервис имитирует реальный мир. Вопрос лишь в том как хранить. Думается следы воздействия надо хранить вместе с объектом воздействия. Курсор и позицию прокрутки заметки - вместе с заметкой. Текущую заметку - вместе с множеством заметок.

## Новые способы смотреть заметку

Вначале была единая заметка.

Далее она преобразовалась в текущую и все остальные, с возможностью создавать новые заметки.

Таким образом заметка есть нечто, что помимо самой себя, содержит некоторые возможности обратиться к остальным убранным, вот как.

Тогда теоретически мы можем оставить обращение `getNote`, но оно будет выполнять теперь иную функцию.

Мы получается все заметки без исключения - так или иначе.

Но есть третий способ - получить конкретную заметку. Впрочем разве это не подразумевает возможность получить и остальные?

Хм, а что если исходная getNote будет теперь хранить ссылку на одну из заметок, находящихся уже в `/notes`? И если хотите грузить остальные заметки - грузите оттуда. Если просто иметь "главное" - берете getNote и это будет главная текущая заметка.

А как перейти от содержания к ссылке?

## Объект и субъект

Всё же изменение объекта и изменение способа смотреть на него - разные вещи. Переводя взгляд с заметки на заметку я не меняю набора заметок, хотя если добавление заметки приравняю к наблюдению, тогда да.

Еще вопрос - скажем множество заметок смотрит несколько человек. Для каждого текущей заметкой может быть различная. Мы тогда либо должны иметь копии для каждого человека, либо вводить различие между объектом и субъектом. Или так - выбирать что записывать "к себе", а что "к объекту". Что необычно... Стандартный путь - отделить жестко субъективные свойства от объективных - курсор это субъективное. Либо же записывать к объекту все свойства всех людей?

С другой стороны, необходимость создавать "закладки" для каждого человека появляется не сразу. Долгое время я обхожусь без закладки, читая книжку. Закладка - это измененная книжка. Это дополнительный элемент в модели книжки. Несмотря на то что фактически он уже есть, я могу пока что не вводить закладку. То есть я могу пока не сохранять текущую заметку.

С другой стороны... Сохранение заметки подразумевает сохранение ее самой или того факта что она текущая? Тот факт что заметка теперь существует двояко (как сама по себе и как часть множества) возможно производит и двоякое сохранение...
